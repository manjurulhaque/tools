<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unit Converter with Bootstrap</title>
  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>

<div class="container my-5">
  <h1 class="mb-4 text-center">Unit Converter</h1>

  <form id="converterForm" class="row g-3">
    <div class="col-12">
      <label for="category" class="form-label">Category</label>
      <select id="category" class="form-select"></select>
    </div>

    <div class="col-12">
      <label for="value" class="form-label">Value</label>
      <input type="number" id="value" class="form-control" placeholder="Enter value" />
    </div>

    <div class="col-md-5">
      <label for="fromUnit" class="form-label">From</label>
      <select id="fromUnit" class="form-select"></select>
    </div>

    <div class="col-md-2 d-flex align-items-end justify-content-center">
      <button type="button" id="swapBtn" class="btn btn-outline-primary w-100" title="Swap units">⇆</button>
    </div>

    <div class="col-md-5">
      <label for="toUnit" class="form-label">To</label>
      <select id="toUnit" class="form-select"></select>
    </div>

    <div class="col-12">
      <div id="result" class="alert alert-secondary text-center py-2">Result: —</div>
    </div>
  </form>
</div>

<!-- Bootstrap Bundle with Popper.js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const units = {
    length: ["meter", "kilometer", "centimeter", "millimeter", "micrometer", "nanometer", "mile", "yard", "foot", "inch"],
    mass: ["kilogram", "gram", "milligram", "microgram", "tonne", "pound", "ounce"],
    temperature: ["celsius", "fahrenheit", "kelvin"],
    time: ["second", "millisecond", "microsecond", "nanosecond", "minute", "hour", "day"],
    speed: ["meters per second", "kilometers per hour", "miles per hour", "feet per second", "knot"],
    angle: ["degree", "radian", "gradian", "arcminute", "arcsecond"],
    pressure: ["pascal", "kilopascal", "bar", "millibar", "atmosphere", "torr", "psi"],
    frequency: ["hertz", "kilohertz", "megahertz", "gigahertz"],
    fuelEfficiency: ["km/l", "l/100km", "mpg (US)", "mpg (UK)"]
  };

  const factors = {
    length: { meter: 1, kilometer: 1000, centimeter: 0.01, millimeter: 0.001, micrometer: 1e-6, nanometer: 1e-9, mile: 1609.34, yard: 0.9144, foot: 0.3048, inch: 0.0254 },
    mass: { kilogram: 1, gram: 0.001, milligram: 1e-6, microgram: 1e-9, tonne: 1000, pound: 0.453592, ounce: 0.0283495 },
    time: { second: 1, millisecond: 0.001, microsecond: 1e-6, nanosecond: 1e-9, minute: 60, hour: 3600, day: 86400 },
    speed: { "meters per second": 1, "kilometers per hour": 0.277778, "miles per hour": 0.44704, "feet per second": 0.3048, knot: 0.514444 },
    angle: { degree: 1, radian: 57.2958, gradian: 0.9, arcminute: 1 / 60, arcsecond: 1 / 3600 },
    pressure: { pascal: 1, kilopascal: 1000, bar: 100000, millibar: 100, atmosphere: 101325, torr: 133.322, psi: 6894.76 },
    frequency: { hertz: 1, kilohertz: 1000, megahertz: 1e6, gigahertz: 1e9 }
  };

  function populateCategories() {
    const select = document.getElementById("category");
    select.innerHTML = "";
    for (let cat in units) {
      select.add(new Option(capitalize(cat), cat));
    }
  }

  function populateUnits() {
    const category = document.getElementById("category").value;
    const fromUnit = document.getElementById("fromUnit");
    const toUnit = document.getElementById("toUnit");
    fromUnit.innerHTML = "";
    toUnit.innerHTML = "";
    units[category].forEach(u => {
      fromUnit.add(new Option(u, u));
      toUnit.add(new Option(u, u));
    });
  }

  function convert() {
    const category = document.getElementById("category").value;
    const from = document.getElementById("fromUnit").value;
    const to = document.getElementById("toUnit").value;
    const val = parseFloat(document.getElementById("value").value);
    const resultEl = document.getElementById("result");

    if (isNaN(val)) {
      resultEl.textContent = "Please enter a valid number.";
      resultEl.className = "alert alert-warning text-center";
      return;
    }

    let result;

    if (category === "temperature") {
      result = convertTemperature(val, from, to);
    } else if (category === "fuelEfficiency") {
      result = convertFuelEfficiency(val, from, to);
    } else {
      const base = val * factors[category][from];
      result = base / factors[category][to];
    }

    resultEl.textContent = `Result: ${result} ${to}`;
    resultEl.className = "alert alert-secondary text-center";
  }

  function convertTemperature(val, from, to) {
    let c;
    if (from === "celsius") c = val;
    else if (from === "fahrenheit") c = (val - 32) * 5 / 9;
    else if (from === "kelvin") c = val - 273.15;

    if (to === "celsius") return round(c);
    if (to === "fahrenheit") return round(c * 9 / 5 + 32);
    if (to === "kelvin") return round(c + 273.15);
  }

  function convertFuelEfficiency(val, from, to) {
    let kmpl;
    if (from === "km/l") kmpl = val;
    else if (from === "l/100km") kmpl = 100 / val;
    else if (from === "mpg (US)") kmpl = val * 0.425144;
    else if (from === "mpg (UK)") kmpl = val * 0.354006;

    if (to === "km/l") return round(kmpl);
    if (to === "l/100km") return round(100 / kmpl);
    if (to === "mpg (US)") return round(kmpl / 0.425144);
    if (to === "mpg (UK)") return round(kmpl / 0.354006);
  }

  function swapUnits() {
    const from = document.getElementById("fromUnit");
    const to = document.getElementById("toUnit");
    const temp = from.value;
    from.value = to.value;
    to.value = temp;
    convert();
  }

  function capitalize(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  function round(num) {
    return Math.round(num * 100000) / 100000; // round to 5 decimals
  }

  // Event listeners
  document.addEventListener("DOMContentLoaded", () => {
    populateCategories();
    populateUnits();
    convert();

    document.getElementById("category").addEventListener("change", () => {
      populateUnits();
      convert();
    });
    document.getElementById("value").addEventListener("input", convert);
    document.getElementById("fromUnit").addEventListener("change", convert);
    document.getElementById("toUnit").addEventListener("change", convert);
    document.getElementById("swapBtn").addEventListener("click", swapUnits);
  });
</script>

</body>
</html>
