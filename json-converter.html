<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JSON Converter with Input & Highlighting</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
  <style>
    pre code {
      display: block;
      padding: 1em;
      background: #f5f2f0;
      border-radius: 0.3em;
      max-height: 400px;
      overflow: auto;
    }
  </style>
</head>
<body class="bg-light">

<div class="container py-5">
  <h1 class="mb-4">ðŸ”§ JSON Input & Code Highlighter</h1>

  <div class="mb-3">
    <label for="jsonInput" class="form-label">Enter or Paste JSON</label>
    <textarea class="form-control" id="jsonInput" rows="6" placeholder='{"name": "Alice", "age": 25}'></textarea>
  </div>

  <div class="row mb-3">
    <div class="col-md-6">
      <label for="languageSelect" class="form-label">Choose Output Language</label>
      <select class="form-select" id="languageSelect">
        <option value="json" selected>JSON</option>
        <option value="javascript">JavaScript</option>
        <option value="python">Python</option>
        <option value="yaml">YAML</option>
        <option value="sql">SQL</option>
      </select>
    </div>
    <div class="col-md-6 d-flex align-items-end">
      <button class="btn btn-primary w-100" onclick="renderFormattedCode()">Render Highlighted Code</button>
    </div>
  </div>

  <div class="card">
    <div class="card-header">ðŸ§¾ Highlighted Output</div>
    <div class="card-body">
      <pre><code id="highlightOutput" class="language-json">// Highlighted output will appear here...</code></pre>
    </div>
  </div>
</div>

<!-- Prism + Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<script>
function renderFormattedCode() {
  const rawInput = document.getElementById("jsonInput").value.trim();
  const lang = document.getElementById("languageSelect").value;
  const outputEl = document.getElementById("highlightOutput");

  let obj;
  try {
    obj = JSON.parse(rawInput);
  } catch (e) {
    outputEl.textContent = "// Invalid JSON: " + e.message;
    outputEl.className = "language-js";
    Prism.highlightElement(outputEl);
    return;
  }

  let formatted = "";
  switch (lang) {
    case "json":
      formatted = JSON.stringify(obj, null, 4);
      break;
    case "javascript":
      formatted = `const data = ${JSON.stringify(obj, null, 4)};`;
      break;
    case "python":
      formatted = "data = {\n" +
        Object.entries(obj).map(([k, v]) => {
          let val = typeof v === "string"
            ? `'${v}'`
            : Array.isArray(v)
              ? `[${v.map(i => `'${i}'`).join(", ")}]`
              : v;
          return `    '${k}': ${val}`;
        }).join(",\n") +
        "\n}";
      break;
    case "yaml":
      formatted = Object.entries(obj).map(([k, v]) => {
        if (Array.isArray(v)) {
          return `${k}:\n  - ${v.join("\n  - ")}`;
        } else {
          return `${k}: ${v}`;
        }
      }).join("\n");
      break;
    case "sql":
      formatted = `INSERT INTO table_name (${Object.keys(obj).join(", ")})\nVALUES (${Object.values(obj).map(v => typeof v === "string" ? `'${v}'` : v).join(", ")});`;
      break;
    default:
      formatted = "// Unsupported format";
  }

  outputEl.textContent = formatted;
  outputEl.className = `language-${lang}`;
  Prism.highlightElement(outputEl);
}
</script>

</body>
</html>
