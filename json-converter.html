<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live JSON Converter & Highlighter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Prism CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
  <style>
    pre code {
      display: block;
      padding: 1em;
      background: #f5f2f0;
      border-radius: 0.3em;
      max-height: 400px;
      overflow: auto;
    }
    #copyBtn {
      position: absolute;
      top: 10px;
      right: 10px;
    }
    .position-relative pre {
      margin-bottom: 0;
    }
  </style>
</head>
<body class="bg-light">

<div class="container py-5">
  <h1 class="mb-4">ðŸ§° Live JSON Highlighter</h1>

  <!-- JSON Input -->
  <div class="mb-3">
    <label for="jsonInput" class="form-label">JSON Input</label>
    <textarea class="form-control" id="jsonInput" rows="6" placeholder='{"name": "Alice", "age": 25}'></textarea>
  </div>

  <!-- Language Selector -->
  <div class="row mb-3">
    <div class="col-md-6">
      <label for="languageSelect" class="form-label">Output Language</label>
      <select class="form-select" id="languageSelect">
        <option value="json">JSON</option>
        <option value="javascript">JavaScript</option>
        <option value="python">Python</option>
        <option value="yaml">YAML</option>
        <option value="sql">SQL</option>
      </select>
    </div>
  </div>

  <!-- Highlighted Output -->
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <span>ðŸŽ¨ Highlighted Output</span>
      <button id="copyBtn" class="btn btn-outline-secondary btn-sm" onclick="copyOutput()">ðŸ“‹ Copy</button>
    </div>
    <div class="card-body position-relative">
      <pre><code id="highlightOutput" class="language-json">// Highlighted output will appear here...</code></pre>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<script>
const inputEl = document.getElementById("jsonInput");
const langSelect = document.getElementById("languageSelect");
const outputEl = document.getElementById("highlightOutput");

function renderFormattedCode() {
  const rawInput = inputEl.value.trim();
  const lang = langSelect.value;

  let obj;
  try {
    obj = JSON.parse(rawInput);
  } catch (e) {
    outputEl.textContent = "// Invalid JSON: " + e.message;
    outputEl.className = "language-js";
    Prism.highlightElement(outputEl);
    return;
  }

  let formatted = "";
  switch (lang) {
    case "json":
      formatted = JSON.stringify(obj, null, 4);
      break;
    case "javascript":
      formatted = `const data = ${JSON.stringify(obj, null, 4)};`;
      break;
    case "python":
      formatted = "data = {\n" +
        Object.entries(obj).map(([k, v]) => {
          let val = typeof v === "string"
            ? `'${v}'`
            : Array.isArray(v)
              ? `[${v.map(i => `'${i}'`).join(", ")}]`
              : v;
          return `    '${k}': ${val}`;
        }).join(",\n") + "\n}";
      break;
    case "yaml":
      formatted = Object.entries(obj).map(([k, v]) => {
        if (Array.isArray(v)) {
          return `${k}:\n  - ${v.join("\n  - ")}`;
        } else {
          return `${k}: ${v}`;
        }
      }).join("\n");
      break;
    case "sql":
      formatted = `INSERT INTO table_name (${Object.keys(obj).join(", ")})\nVALUES (${Object.values(obj).map(v => typeof v === "string" ? `'${v}'` : v).join(", ")});`;
      break;
    default:
      formatted = "// Unsupported format";
  }

  outputEl.textContent = formatted;
  outputEl.className = `language-${lang}`;
  Prism.highlightElement(outputEl);
}

// Live preview
inputEl.addEventListener("input", renderFormattedCode);
langSelect.addEventListener("change", renderFormattedCode);

// Copy to clipboard
function copyOutput() {
  const text = outputEl.textContent;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.getElementById("copyBtn");
    btn.innerText = "âœ… Copied!";
    setTimeout(() => btn.innerText = "ðŸ“‹ Copy", 1500);
  });
}
</script>

</body>
</html>
