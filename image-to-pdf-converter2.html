<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<!-- Primary SEO -->
<title>Convert Images to PDF — Fast, Private & Client-side | Image→PDF Converter</title>
<meta name="description" content="Convert PNG, JPEG and WebP images to print-ready PDF files directly in the browser. Reorder pages, crop, rotate, set DPI, compress and add watermarks — all client-side for privacy. Fast exports, mobile-friendly, accessible and ideal for professionals and students." />
<meta name="keywords" content="image to pdf, convert images to pdf, png to pdf, jpeg to pdf, webp to pdf, client-side PDF converter, image compression, watermark PDF, crop image to pdf, rotate image, print-ready PDF" />
<meta name="author" content="Your Company Name" />
<meta name="robots" content="index, follow, max-snippet:200, max-image-preview:large" />
<link rel="canonical" href="https://example.com/image-to-pdf" />
<link rel="alternate" hreflang="en" href="https://example.com/image-to-pdf" />

<!-- Social / Open Graph -->
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="Image→PDF Converter" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Convert Images to PDF — Fast, Private & Client-side" />
<meta property="og:description" content="Convert PNG, JPEG and WebP images to print-ready PDF files directly in the browser. Reorder pages, crop, rotate, set DPI, compress and add watermarks — all client-side for privacy." />
<meta property="og:url" content="https://example.com/image-to-pdf" />
<meta property="og:image" content="https://example.com/assets/og-image.png" />
<meta property="og:image:alt" content="Screenshot of Image to PDF Converter UI" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@YourTwitterHandle" />
<meta name="twitter:title" content="Convert Images to PDF — Fast, Private & Client-side" />
<meta name="twitter:description" content="Convert PNG, JPEG and WebP images to print-ready PDF files directly in the browser. Reorder pages, crop, rotate, set DPI, compress and add watermarks — all client-side for privacy." />
<meta name="twitter:image" content="https://example.com/assets/og-image.png" />

<!-- Preload critical assets -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" as="style" />
<link rel="preload" href="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js" as="script" />
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" as="style" />

<!-- Favicon / Manifest (replace with your files) -->
<link rel="icon" href="/favicon.ico" />
<link rel="manifest" href="/site.webmanifest" />

<!-- Structured data (JSON-LD) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://example.com/#org",
      "name": "Your Company",
      "url": "https://example.com",
      "logo": "https://example.com/assets/logo.png",
      "sameAs": [
        "https://twitter.com/YourTwitterHandle"
      ],
      "contactPoint": [{
        "@type": "ContactPoint",
        "contactType": "customer support",
        "email": "support@example.com",
        "url": "https://example.com/contact"
      }]
    },
    {
      "@type": "WebSite",
      "@id": "https://example.com/#website",
      "url": "https://example.com",
      "name": "Image→PDF Converter",
      "description": "Client-side image to PDF converter for PNG, JPEG and WebP."
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://example.com/image-to-pdf#breadcrumb",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://example.com" },
        { "@type": "ListItem", "position": 2, "name": "Tools", "item": "https://example.com/tools" },
        { "@type": "ListItem", "position": 3, "name": "Image to PDF", "item": "https://example.com/image-to-pdf" }
      ]
    },
    {
      "@type": "SoftwareApplication",
      "@id": "https://example.com/image-to-pdf#software",
      "name": "Image → PDF Converter",
      "url": "https://example.com/image-to-pdf",
      "description": "Convert PNG/JPEG/WebP to PDF locally in your browser. Reorder, crop, rotate, compress, and watermark images before export.",
      "applicationCategory": "ProductivityApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
  ]
}
</script>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<!-- Other libraries (CDN) -->
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<link  href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/exifreader@4.12.0/dist/exif-reader.min.js"></script>

<style>
  :root{ --bg:#f5f7fb; --muted:#667085; --accent:#1f6feb; --footer-bg:#f8fafc; }
  body{background:var(--bg); color:#0b1220; font-family:Inter, Roboto, Arial, sans-serif; line-height:1.5;}
  .app-container{max-width:1200px; margin:22px auto; padding:16px;}
  .app-card{background:linear-gradient(180deg,#ffffff,#fbfdff); border-radius:12px; padding:18px; box-shadow:0 8px 30px rgba(20,30,60,0.06);}
  .dropzone { border:2px dashed #dbe6ff; border-radius:10px; padding:20px; text-align:center; background:linear-gradient(180deg, rgba(31,111,235,0.03), transparent); cursor:pointer;}
  .dropzone.dragover { background:linear-gradient(180deg, rgba(31,111,235,0.08), transparent); }
  .thumbs { display:flex; gap:10px; margin-top:14px; overflow:auto; padding:6px; }
  .thumb { width:120px; min-width:120px; background:#fafbfd; border-radius:8px; padding:8px; display:flex; flex-direction:column; gap:8px; align-items:center; justify-content:center;}
  .thumb img{max-width:100%; max-height:80px; border-radius:6px; object-fit:contain;}
  .muted { color:var(--muted); font-size:13px; }
  .section-title { font-weight:700; margin:8px 0; font-size:14px; }
  .crop-controls { display: none !important; }       /* hidden by design */
  .cropper-container .top-right { display: none !important; }
  footer.site-footer { background:var(--footer-bg); border-top:1px solid rgba(15,23,42,0.04); margin-top:28px; padding:28px 16px; font-size:14px; color:#253142; }
  footer.site-footer a { color:#253142; text-decoration:none; }
  footer.site-footer a:hover { text-decoration:underline; }
  .brand-mark { display:flex; gap:12px; align-items:center; }
  .brand-mark .logo-box { width:48px; height:48px; display:inline-flex; align-items:center; justify-content:center; border-radius:10px; box-shadow:0 6px 18px rgba(31,111,235,0.09); }
  .newsletter-input { max-width:320px; }
  .social-icons svg { width:20px; height:20px; vertical-align:middle; }
  @media (max-width: 768px){ .brand-mark .wordmark { display:none; } .footer-grid { gap:18px } }
</style>
</head>
<body>

<!-- NAVBAR: improved logo (inline SVG + wordmark) -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top" role="navigation" aria-label="Main">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center gap-3" href="https://example.com" title="Image to PDF Converter — Your Company" aria-label="Image to PDF Converter home link">
      <!-- LOGO: gradient mark + wordmark (inline SVG, accessible) -->
      <span class="logo-box" aria-hidden="true" style="background:linear-gradient(135deg,#1f6feb,#69b3ff);">
        <svg width="34" height="34" viewBox="0 0 64 64" role="img" aria-hidden="true" focusable="false">
          <title>Image to PDF logo</title>
          <defs>
            <linearGradient id="gMark" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0" stop-color="#ffffff" stop-opacity="0.18"></stop>
              <stop offset="1" stop-color="#ffffff" stop-opacity="0.06"></stop>
            </linearGradient>
          </defs>
          <rect x="6" y="6" width="52" height="52" rx="10" fill="url(#gMark)"></rect>
          <g transform="translate(9 9)">
            <rect x="0" y="0" width="46" height="46" rx="8" fill="transparent"></rect>
            <path d="M6 30 L6 10 L20 10 C23 10 25 11.8 25 14 C25 16.2 23 18 20 18 L12 18" fill="#fff" opacity="0.95"></path>
            <path d="M28 10 L38 10 L38 30 L28 30 C25.8 30 24 28.2 24 26 L24 24 C24 21.8 25.8 20 28 20 Z" fill="#fff" opacity="0.95"></path>
          </g>
        </svg>
      </span>
      <span class="wordmark">
        <span style="display:flex;flex-direction:column;line-height:1;">
          <strong style="font-size:16px;color:#0b1220;">Image → PDF</strong>
          <small style="font-size:12px;color:var(--muted);">Fast • Private • Client-side</small>
        </span>
      </span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navPrimary" aria-controls="navPrimary" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navPrimary">
      <ul class="navbar-nav mb-2 mb-lg-0 align-items-lg-center">
        <li class="nav-item"><a class="nav-link active" href="https://example.com/image-to-pdf">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
        <li class="nav-item"><a class="nav-link" href="#howto">How to</a></li>
        <li class="nav-item"><a class="nav-link" href="#faq">FAQ</a></li>
        <li class="nav-item"><a class="nav-link" href="#privacy">Privacy</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="app-container" id="mainApp" role="main">
  <article class="app-card" itemscope itemtype="https://schema.org/SoftwareApplication">
    <header class="mb-3">
      <h1 itemprop="name" class="h4 mb-1">Advanced Image to PDF Converter — fast, private, client-side</h1>
      <p itemprop="description" class="muted mb-0">Convert PNG, JPEG and WebP images to high-quality, print-ready PDF files entirely in your browser. Preserve privacy — no uploads — and control output with DPI, compression, margins and watermarks.</p>
    </header>

    <div class="row g-3">
      <!-- left -->
      <div class="col-lg-8">
        <section aria-labelledby="uploaderTitle">
          <h2 id="uploaderTitle" class="h6 section-title">Upload and prepare images</h2>

          <div id="dropzone" class="dropzone" tabindex="0" aria-describedby="uploaderHelp">
            <div class="fw-bold">Drag & drop images, or click to browse</div>
            <div id="uploaderHelp" class="muted">Supports PNG, JPEG and WebP. Paste from clipboard (Ctrl+V) or use device camera. For best results keep images under 20MB each for client-side processing.</div>
            <div class="d-flex gap-2 align-items-center mt-3">
              <input id="fileInput" type="file" accept="image/*" multiple style="display:none" />
              <button class="btn btn-primary btn-sm" id="btnBrowse">Browse files</button>
              <button class="btn btn-outline-primary btn-sm" id="btnClear">Clear all</button>
              <div class="ms-auto d-flex align-items-center">
                <small class="muted me-2">Images</small>
                <div id="count" class="muted">0</div>
              </div>
            </div>
          </div>

          <div id="thumbs" class="thumbs" aria-live="polite" aria-label="Uploaded images thumbnails"></div>

          <div class="mt-3">
            <div class="section-title">Image settings (global)</div>
            <div class="row g-2">
              <div class="col-md-6">
                <label class="form-label small">Fit mode</label>
                <select id="fitMode" class="form-select form-select-sm" aria-label="Global fit mode">
                  <option value="contain">Fit (contain) — keep aspect ratio</option>
                  <option value="cover">Fill (cover) — crop to fill page</option>
                  <option value="stretch">Stretch — fill page (may distort)</option>
                  <option value="center">Center — no scaling</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label small">Compression quality</label>
                <input id="quality" type="range" min="0.2" max="1" step="0.05" value="0.9" class="form-range" aria-label="Compression quality">
                <small class="muted">Higher = better quality, larger file</small>
              </div>
              <div class="col-md-3">
                <label class="form-label small">DPI (print)</label>
                <input id="dpi" type="number" min="72" max="600" value="150" class="form-control form-control-sm" aria-label="DPI">
                <small class="muted">300 DPI recommended for photo-quality prints</small>
              </div>
            </div>

            <div class="d-flex gap-2 mt-2">
              <button id="btnRotateLeft" class="btn btn-sm btn-outline-secondary">Rotate ⟲</button>
              <button id="btnRotateRight" class="btn btn-sm btn-outline-secondary">Rotate ⟳</button>
              <button id="btnCrop" class="btn btn-sm btn-outline-secondary">Open Crop</button>
              <button id="btnAutoOrient" class="btn btn-sm btn-outline-secondary">Auto-orient (EXIF)</button>
            </div>
          </div>

          <div class="mt-3">
            <div class="section-title">Watermark (optional)</div>
            <p class="muted">Add a visible text watermark to every page for confidentiality or branding.</p>
            <div class="row g-2 align-items-center">
              <div class="col-md-7">
                <input id="watermarkText" type="text" placeholder="Optional watermark text (e.g. Confidential, Draft, YourCompany.com)" class="form-control form-control-sm" aria-label="Watermark text">
              </div>
              <div class="col-md-3">
                <label class="form-label small mb-1">Opacity</label>
                <input id="watermarkOpacity" type="range" min="0" max="1" step="0.05" value="0.25" class="form-range" aria-label="Watermark opacity">
              </div>
              <div class="col-md-2">
                <label class="form-label small">Font size</label>
                <input id="watermarkSize" type="number" min="8" max="72" value="24" class="form-control form-control-sm" aria-label="Watermark size">
              </div>
            </div>

            <div class="row g-2 mt-2">
              <div class="col-md-6">
                <label class="form-label small">Position</label>
                <select id="watermarkPos" class="form-select form-select-sm" aria-label="Watermark position">
                  <option value="center">Center</option>
                  <option value="top-left">Top-left</option>
                  <option value="top-right">Top-right</option>
                  <option value="bottom-left">Bottom-left</option>
                  <option value="bottom-right">Bottom-right</option>
                </select>
              </div>
            </div>

            <p class="help muted mt-2">Tip: Reorder pages by dragging thumbnails. Use Preview to check the first page before generating large exports.</p>
          </div>
        </section>
      </div>

      <!-- right -->
      <aside class="col-lg-4">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h2 class="h6 mb-3">PDF export</h2>

            <label class="form-label small">Page size</label>
            <select id="pageSize" class="form-select form-select-sm mb-2">
              <option value="A4">A4 (210 × 297 mm)</option>
              <option value="Letter">Letter (8.5 × 11 in)</option>
              <option value="Legal">Legal (8.5 × 14 in)</option>
              <option value="Custom">Custom (mm)</option>
            </select>

            <div id="customSizeRow" class="d-none row g-2 mb-2">
              <div class="col-6"><input id="customW" type="number" min="10" value="210" class="form-control form-control-sm" aria-label="Custom width (mm)"></div>
              <div class="col-6"><input id="customH" type="number" min="10" value="297" class="form-control form-control-sm" aria-label="Custom height (mm)"></div>
            </div>

            <label class="form-label small">Orientation</label>
            <select id="orientation" class="form-select form-select-sm mb-2">
              <option value="portrait">Portrait</option>
              <option value="landscape">Landscape</option>
            </select>

            <label class="form-label small">Margins (mm)</label>
            <input id="margins" type="number" min="0" value="10" class="form-control form-control-sm mb-2">

            <label class="form-label small">PDF metadata</label>
            <input id="pdfTitle" type="text" placeholder="Title" class="form-control form-control-sm mb-1" aria-label="PDF title">
            <input id="pdfAuthor" type="text" placeholder="Author" class="form-control form-control-sm mb-1" aria-label="PDF author">
            <input id="pdfSubject" type="text" placeholder="Subject" class="form-control form-control-sm mb-2" aria-label="PDF subject">

            <label class="form-label small">Output filename</label>
            <input id="outName" type="text" value="document.pdf" class="form-control form-control-sm mb-2">

            <div class="mb-3">
              <div class="form-check">
                <input id="embedAsJpg" class="form-check-input" type="checkbox" checked>
                <label class="form-check-label small" for="embedAsJpg">Embed as JPEG when possible (smaller files)</label>
              </div>
            </div>

            <div class="d-flex gap-2">
              <button class="btn btn-primary" id="btnGenerate">Generate PDF</button>
              <button class="btn btn-outline-primary" id="btnPreview">Preview 1st page</button>
            </div>

            <div class="progress mt-3" style="height:10px;"><div id="progressBar" class="progress-bar" role="progressbar" style="width:0%"></div></div>

            <div class="d-flex gap-2 align-items-center mt-2">
              <div class="muted">Status:</div>
              <div id="status" class="muted">Idle</div>
            </div>
          </div>
        </div>

        <div class="card mt-3">
          <div class="card-body">
            <h3 class="h6">Quick tips</h3>
            <ul>
              <li>Use <strong>300 DPI</strong> for print; <strong>150 DPI</strong> for sharing online.</li>
              <li>Choose <em>Embed as JPEG</em> for photographic images to reduce file size.</li>
              <li>Crop out white margins before exporting to save bytes and improve layout.</li>
              <li>Preview the first page for layout verification on large batches.</li>
            </ul>
          </div>
        </div>
      </aside>
    </div>

    <!-- long-form SEO content shortened for readability -->
    <section class="mt-4 seo" id="features">
      <h2 class="h5">Features — what this converter does</h2>
      <p class="muted">Batch convert images to PDF, apply per-image edits, set page size and DPI, add watermarks and set metadata — all locally in the browser.</p>
    </section>

    <footer class="site-footer" role="contentinfo" aria-label="Footer">
      <div class="container">
        <div class="row footer-grid gx-4 gy-4">
          <!-- Brand + short description -->
          <div class="col-12 col-md-4">
            <div class="brand-mark">
              <span class="logo-box" aria-hidden="true" style="background:linear-gradient(135deg,#1f6feb,#69b3ff);">
                <!-- compact white glyph on colored square -->
                <svg width="36" height="36" viewBox="0 0 64 64" role="img" aria-hidden="true" focusable="false">
                  <rect x="4" y="4" width="56" height="56" rx="10" fill="white" opacity="0.06"></rect>
                  <path d="M18 38 L18 18 L30 18 C33 18 35 19.8 35 22 C35 24.2 33 26 30 26 L24 26" fill="#fff"></path>
                  <path d="M34 18 L44 18 L44 38 L34 38 C31.8 38 30 36.2 30 34 L30 30 C30 27.8 31.8 26 34 26 Z" fill="#fff"></path>
                </svg>
              </span>
              <div>
                <strong>Image → PDF</strong>
                <div class="muted" style="font-size:13px;">Fast, private conversion — client-side, no uploads.</div>
              </div>
            </div>
            <p class="mt-2 muted">Convert images to print-ready PDFs with precise control over size, quality and metadata. Suitable for professionals and students.</p>
          </div>

          <!-- Product links -->
          <div class="col-6 col-md-2">
            <h4 style="font-size:14px;margin-bottom:8px;">Product</h4>
            <ul style="list-style:none;padding:0;margin:0;">
              <li><a href="/image-to-pdf">Image → PDF</a></li>
              <li><a href="/pdf-tools">PDF Tools</a></li>
              <li><a href="/pricing">Pricing</a></li>
            </ul>
          </div>

          <!-- Resources -->
          <div class="col-6 col-md-2">
            <h4 style="font-size:14px;margin-bottom:8px;">Resources</h4>
            <ul style="list-style:none;padding:0;margin:0;">
              <li><a href="/how-to">How to</a></li>
              <li><a href="/faq">FAQ</a></li>
              <li><a href="/support">Support</a></li>
            </ul>
          </div>

          <!-- Company & contact -->
          <div class="col-6 col-md-2">
            <h4 style="font-size:14px;margin-bottom:8px;">Company</h4>
            <ul style="list-style:none;padding:0;margin:0;">
              <li><a href="/about">About</a></li>
              <li><a href="/careers">Careers</a></li>
              <li><a href="/contact">Contact</a></li>
            </ul>
          </div>

          <!-- Newsletter + social -->
          <div class="col-12 col-md-2">
            <h4 style="font-size:14px;margin-bottom:8px;">Stay informed</h4>
            <form id="newsletterForm" class="d-flex flex-column" onsubmit="event.preventDefault(); alert('Thank you — this is a demo newsletter input (no server).');">
              <input type="email" id="newsletterEmail" class="form-control newsletter-input form-control-sm mb-2" placeholder="your@email.com" aria-label="Newsletter email">
              <button class="btn btn-sm btn-primary" type="submit">Subscribe</button>
            </form>
            <div class="mt-3">
              <div class="muted" style="font-size:13px;margin-bottom:6px;">Follow</div>
              <div class="d-flex gap-2 social-icons" aria-hidden="false" role="group" aria-label="Social links">
                <!-- Twitter -->
                <a href="https://twitter.com/YourTwitterHandle" target="_blank" rel="noopener" aria-label="Twitter">
                  <svg viewBox="0 0 24 24" fill="currentColor" role="img" focusable="false"><path d="M22 5.92c-.63.28-1.3.48-2 .57.72-.43 1.27-1.1 1.53-1.9-.68.4-1.43.7-2.22.86C18.9 4.6 17.64 4 16.3 4c-1.92 0-3.48 1.56-3.48 3.48 0 .27.03.53.09.78C9.69 8.17 6.47 6.44 4.49 3.7c-.3.52-.47 1.12-.47 1.76 0 1.22.62 2.3 1.56 2.93-.58-.02-1.13-.18-1.61-.44v.05c0 1.69 1.2 3.1 2.8 3.42-.29.08-.6.12-.92.12-.22 0-.44-.02-.65-.06.44 1.36 1.7 2.34 3.2 2.37-1.17.92-2.64 1.47-4.24 1.47-.28 0-.55-.02-.82-.05 1.6 1.02 3.5 1.62 5.54 1.62 6.64 0 10.28-5.5 10.28-10.28v-.47c.7-.5 1.3-1.13 1.78-1.85-.64.28-1.32.47-2.03.56z"/></svg>
                </a>
                <!-- GitHub -->
                <a href="https://github.com/YourRepo" target="_blank" rel="noopener" aria-label="GitHub">
                  <svg viewBox="0 0 24 24" fill="currentColor" role="img" focusable="false"><path d="M12 .5C5.73.5.98 5.27.98 11.53c0 4.66 3.02 8.63 7.22 10.03.53.1.72-.23.72-.5 0-.25-.01-1.08-.02-1.98-2.94.64-3.56-1.42-3.56-1.42-.48-1.22-1.17-1.54-1.17-1.54-.96-.65.07-.64.07-.64 1.07.08 1.64 1.1 1.64 1.1.94 1.62 2.47 1.15 3.07.88.09-.7.37-1.15.67-1.42-2.35-.27-4.82-1.18-4.82-5.24 0-1.16.41-2.11 1.08-2.85-.11-.26-.47-1.29.1-2.69 0 0 .88-.28 2.9 1.08a10.1 10.1 0 0 1 2.64-.36c.9.01 1.8.12 2.64.36 2.02-1.36 2.9-1.08 2.9-1.08.57 1.4.21 2.44.11 2.69.67.74 1.08 1.69 1.08 2.85 0 4.07-2.48 4.97-4.84 5.23.38.33.71.98.71 1.98 0 1.43-.01 2.59-.01 2.94 0 .28.19.61.73.5 4.2-1.41 7.22-5.37 7.22-10.03C23.02 5.27 18.27.5 12 .5z"/></svg>
                </a>
              </div>
            </div>
          </div>
        </div>

        <hr style="margin:20px 0;border:none;border-top:1px solid rgba(15,23,42,0.04);">

        <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between">
          <div class="muted" style="font-size:13px;">© <span id="year"></span> Your Company — <a href="/privacy">Privacy</a> · <a href="/terms">Terms</a></div>
          <div class="muted" style="font-size:13px; margin-top:10px; margin-bottom:0;">Made with care — client-side conversion for privacy and speed.</div>
        </div>
      </div>
    </footer>
  </article>
</main>

<!-- Hidden crop modal DOM -->
<div id="modal" class="modal" aria-hidden="true" style="display:none;">
  <div class="cropper-container" role="dialog" aria-modal="true" aria-labelledby="cropTitle">
    <div style="display:flex; align-items:center; gap:10px;">
      <div id="cropTitle" style="font-weight:700;">Crop / Adjust</div>
      <div class="top-right">
        <button id="cropRotateLeft" class="small">Rotate ⟲</button>
        <button id="cropRotateRight" class="small">Rotate ⟳</button>
        <button id="cropReset" class="small">Reset</button>
      </div>
    </div>
    <div class="crop-area">
      <img id="cropImg" style="max-width:100%; max-height:100%; display:block;" alt="Image for cropping"/>
    </div>
    <div class="crop-controls">
      <button id="cropCancel" class="small">Cancel</button>
      <button id="cropApply" class="small" style="background:#1f6feb;color:white;border:none;">Apply</button>
    </div>
  </div>
</div>

<!-- Full application JS -->
<script>
document.getElementById('year').textContent = new Date().getFullYear();

/* Minimal readiness check for libraries */
function libsReady() { return window.PDFLib && window.Sortable && window.Cropper && window.saveAs && window.ExifReader; }
function whenLibsReady(fn){
  if(libsReady()) return fn();
  let attempts = 0;
  const iv = setInterval(()=> {
    attempts++;
    if(libsReady()){ clearInterval(iv); fn(); }
    else if(attempts > 40){ clearInterval(iv); console.warn('Libraries may not be fully loaded. Proceeding anyway.'); fn(); }
  }, 100);
}

/* Full app logic (same as previous working version) */
whenLibsReady(()=> {
  const { PDFDocument, StandardFonts, rgb } = window.PDFLib;

  /* Elements */
  const dropzone = document.getElementById('dropzone');
  const fileInput = document.getElementById('fileInput');
  const btnBrowse = document.getElementById('btnBrowse');
  const btnClear = document.getElementById('btnClear');
  const thumbsEl = document.getElementById('thumbs');
  const countEl = document.getElementById('count');
  const btnGenerate = document.getElementById('btnGenerate');
  const btnPreview = document.getElementById('btnPreview');
  const progressBar = document.getElementById('progressBar');
  const statusEl = document.getElementById('status');
  const fitModeEl = document.getElementById('fitMode');
  const qualityEl = document.getElementById('quality');
  const dpiEl = document.getElementById('dpi');
  const pageSizeEl = document.getElementById('pageSize');
  const orientationEl = document.getElementById('orientation');
  const marginsEl = document.getElementById('margins');
  const customSizeRow = document.getElementById('customSizeRow');
  const customW = document.getElementById('customW');
  const customH = document.getElementById('customH');
  const outNameEl = document.getElementById('outName');
  const watermarkTextEl = document.getElementById('watermarkText');
  const watermarkOpacityEl = document.getElementById('watermarkOpacity');
  const watermarkSizeEl = document.getElementById('watermarkSize');
  const watermarkPosEl = document.getElementById('watermarkPos');
  const embedAsJpgEl = document.getElementById('embedAsJpg');

  let images = [];
  let currentCropIndex = null;
  let cropper = null;

  function uid(){ return Math.random().toString(36).slice(2,9); }
  function mmToPoints(mm){ return mm * 2.8346456693; }
  const PAGE_PRESETS = { 'A4': { w_mm:210, h_mm:297 }, 'Letter': { w_in:8.5, h_in:11 }, 'Legal': { w_in:8.5, h_in:14 } };

  function updateCount(){ countEl.textContent = images.length; }

  btnBrowse.addEventListener('click', ()=> fileInput.click());
  fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));
  btnClear.addEventListener('click', ()=> { images = []; renderThumbs(); status('Cleared'); });

  ['dragenter','dragover'].forEach(ev => { dropzone.addEventListener(ev, (e)=> { e.preventDefault(); e.stopPropagation(); dropzone.classList.add('dragover');}); });
  ['dragleave','drop'].forEach(ev => { dropzone.addEventListener(ev, (e)=> { e.preventDefault(); e.stopPropagation(); dropzone.classList.remove('dragover');}); });
  dropzone.addEventListener('drop', (e)=> { const dt = e.dataTransfer; if(dt && dt.files) handleFiles(dt.files); });
  dropzone.addEventListener('click', ()=> fileInput.click());

  window.addEventListener('paste', (e)=> {
    if(e.clipboardData){
      const items = e.clipboardData.items;
      const list = [];
      for(let i=0;i<items.length;i++){
        const it = items[i];
        if(it.type && it.type.indexOf && it.type.indexOf('image') !== -1){
          const file = it.getAsFile();
          if(file) list.push(file);
        }
      }
      if(list.length) handleFiles(list);
    }
  });

  async function handleFiles(fileList){
    const files = Array.from(fileList).filter(f=>f.type && f.type.startsWith('image/'));
    if(files.length === 0) return;
    status('Reading ' + files.length + ' files...');
    for(const f of files){
      const id = uid();
      const dataUrl = await fileToDataURL(f);
      const dims = await getImageSize(dataUrl);
      let orientation = 1;
      try{ const tags = ExifReader.load(await f.arrayBuffer()); if(tags && tags.Orientation && tags.Orientation.value) orientation = tags.Orientation.value; } catch(err){}
      images.push({ id, file: f, name: f.name, dataUrl, rotation:0, cropData:null, width:dims.width, height:dims.height, exifOrientation:orientation });
    }
    renderThumbs();
    status('Loaded ' + images.length + ' images');
  }

  function fileToDataURL(file){ return new Promise((resolve,reject)=>{ const fr = new FileReader(); fr.onload = ()=> resolve(fr.result); fr.onerror = reject; fr.readAsDataURL(file); }); }
  function getImageSize(dataUrl){ return new Promise((res, rej)=>{ const img = new Image(); img.onload = ()=> res({width:img.naturalWidth, height:img.naturalHeight}); img.onerror = rej; img.src = dataUrl; }); }

  function renderThumbs(){
    thumbsEl.innerHTML = '';
    images.forEach((img, index) => {
      const div = document.createElement('div');
      div.className = 'thumb';
      div.dataset.id = img.id;
      div.innerHTML = `
        <img src="${img.dataUrl}" alt="${escapeHtml(img.name)}"/>
        <div style="font-size:12px; text-align:center; word-break:break-word;">${escapeHtml(img.name)}</div>
        <div class="d-flex gap-1">
          <button class="btn btn-sm btn-outline-secondary rotate-left" title="Rotate left">⟲</button>
          <button class="btn btn-sm btn-outline-secondary rotate-right" title="Rotate right">⟳</button>
          <button class="btn btn-sm btn-outline-secondary crop" title="Crop">Crop</button>
        </div>
      `;
      thumbsEl.appendChild(div);
      div.querySelector('.rotate-left').addEventListener('click', ()=> { rotateImage(img.id, -90); });
      div.querySelector('.rotate-right').addEventListener('click', ()=> { rotateImage(img.id, 90); });
      div.querySelector('.crop').addEventListener('click', ()=> { openCrop(img.id); });
    });

    Sortable.create(thumbsEl, {
      animation: 150,
      onEnd(evt){
        const oldIndex = evt.oldIndex, newIndex = evt.newIndex;
        if(oldIndex === newIndex) return;
        const moved = images.splice(oldIndex,1)[0];
        images.splice(newIndex,0,moved);
        renderThumbs();
      }
    });

    updateCount();
  }
  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  function rotateImage(id, deg){
    const it = images.find(i=>i.id===id);
    if(!it) return;
    it.rotation = (it.rotation + deg + 3600) % 360;
    applyTransformsToImage(it).then(() => renderThumbs());
  }

  async function applyTransformsToImage(imgObj){
    const img = await loadImage(imgObj.dataUrl);
    let sx=0, sy=0, sW=img.width, sH=img.height;
    if(imgObj.cropData){ sx = imgObj.cropData.x; sy = imgObj.cropData.y; sW = imgObj.cropData.width; sH = imgObj.cropData.height; }
    const tmp = document.createElement('canvas');
    const rot = (imgObj.rotation || 0) % 360;
    if(rot % 180 === 0){ tmp.width = sW; tmp.height = sH; } else { tmp.width = sH; tmp.height = sW; }
    const ctx = tmp.getContext('2d');
    ctx.translate(tmp.width/2, tmp.height/2);
    ctx.rotate(rot * Math.PI / 180);
    ctx.drawImage(img, sx, sy, sW, sH, -sW/2, -sH/2, sW, sH);
    const newDataUrl = tmp.toDataURL('image/png');
    imgObj.dataUrl = newDataUrl; imgObj.width = tmp.width; imgObj.height = tmp.height;
  }

  function loadImage(dataUrl){ return new Promise((res, rej)=>{ const im = new Image(); im.onload = ()=> res(im); im.onerror = rej; im.src = dataUrl; }); }

  /* Crop modal */
  const modal = document.getElementById('modal');
  const cropImgEl = document.getElementById('cropImg');
  const cropApply = document.getElementById('cropApply');
  const cropCancel = document.getElementById('cropCancel');
  const cropRotateLeft = document.getElementById('cropRotateLeft');
  const cropRotateRight = document.getElementById('cropRotateRight');
  const cropReset = document.getElementById('cropReset');

  function openCrop(id){
    const idx = images.findIndex(i=>i.id===id);
    if(idx === -1) return;
    currentCropIndex = idx;
    const obj = images[idx];
    cropImgEl.src = obj.dataUrl;
    modal.style.display = 'block';
    modal.classList.add('show');
    modal.setAttribute('aria-hidden','false');
    if(cropper) cropper.destroy();
    cropper = new Cropper(cropImgEl, { viewMode:1, autoCropArea:0.9, responsive:true, background:false, zoomOnWheel:true, rotatable:true });
    cropRotateLeft.onclick = ()=> cropper.rotate(-90);
    cropRotateRight.onclick = ()=> cropper.rotate(90);
    cropReset.onclick = ()=> cropper.reset();
  }

  cropCancel.addEventListener('click', ()=> { closeCrop(); });
  cropApply.addEventListener('click', async ()=> {
    if(currentCropIndex == null) return;
    const cData = cropper.getData(true);
    const obj = images[currentCropIndex];
    const img = await loadImage(obj.dataUrl);
    const canvas = document.createElement('canvas');
    canvas.width = Math.round(cData.width); canvas.height = Math.round(cData.height);
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img, cData.x, cData.y, cData.width, cData.height, 0, 0, cData.width, cData.height);
    const newDataUrl = canvas.toDataURL('image/png');
    obj.dataUrl = newDataUrl; obj.width = canvas.width; obj.height = canvas.height; obj.cropData = null; obj.rotation = 0;
    closeCrop(); renderThumbs();
  });

  function closeCrop(){ modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); modal.style.display = 'none'; if(cropper){ cropper.destroy(); cropper = null; } currentCropIndex = null; }

  /* EXIF autorient */
  async function autoOrientAll(){
    status('Auto-orienting...');
    for(const it of images){
      const o = it.exifOrientation || 1;
      if(o === 1) continue;
      const canvasResult = await applyExifOrientation(it.dataUrl, o);
      it.dataUrl = canvasResult; it.rotation = 0; it.exifOrientation = 1;
    }
    renderThumbs();
    status('Auto-orient complete');
  }
  document.getElementById('btnAutoOrient').addEventListener('click', autoOrientAll);

  async function applyExifOrientation(dataUrl, orientation){
    const img = await loadImage(dataUrl);
    const w = img.naturalWidth, h = img.naturalHeight;
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    if(orientation >=5 && orientation <=8){ canvas.width = h; canvas.height = w; } else { canvas.width = w; canvas.height = h; }
    switch(orientation){
      case 2: ctx.transform(-1,0,0,1,w,0); break;
      case 3: ctx.translate(w,h); ctx.rotate(Math.PI); break;
      case 4: ctx.transform(1,0,0,-1,0,h); break;
      case 5: ctx.transform(0,1,1,0,0,0); break;
      case 6: ctx.translate(h,0); ctx.rotate(Math.PI/2); break;
      case 7: ctx.transform(0,-1,-1,0,h,w); break;
      case 8: ctx.translate(0,w); ctx.rotate(-Math.PI/2); break;
      default: break;
    }
    ctx.drawImage(img,0,0);
    return canvas.toDataURL('image/png');
  }

  /* Bulk rotate/crop */
  document.getElementById('btnRotateLeft').addEventListener('click', ()=> { images.forEach(i=> i.rotation = (i.rotation - 90 + 360) % 360); Promise.all(images.map(i=> applyTransformsToImage(i))).then(()=> renderThumbs()); });
  document.getElementById('btnRotateRight').addEventListener('click', ()=> { images.forEach(i=> i.rotation = (i.rotation + 90) % 360); Promise.all(images.map(i=> applyTransformsToImage(i))).then(()=> renderThumbs()); });
  document.getElementById('btnCrop').addEventListener('click', ()=> { if(images.length>0) openCrop(images[0].id); });

  /* PDF generation */
  btnGenerate.addEventListener('click', ()=> generatePDF({preview:false}));
  btnPreview.addEventListener('click', ()=> generatePDF({preview:true}));

  function computePageSizePoints(){
    const preset = pageSizeEl.value;
    let wPt, hPt;
    if(preset === 'Custom'){ const wmm = parseFloat(customW.value) || 210; const hmm = parseFloat(customH.value) || 297; wPt = mmToPoints(wmm); hPt = mmToPoints(hmm); }
    else if(preset === 'A4'){ const p = PAGE_PRESETS.A4; wPt = mmToPoints(p.w_mm); hPt = mmToPoints(p.h_mm); }
    else { const p = PAGE_PRESETS[preset]; const wIn = p.w_in; const hIn = p.h_in; wPt = wIn * 72; hPt = hIn * 72; }
    if(orientationEl.value === 'landscape') [wPt,hPt] = [hPt,wPt];
    return {wPt, hPt};
  }

  async function generatePDF({ preview=false } = {}){
    if(images.length === 0){ alert('Add images first'); return; }
    btnGenerate.disabled = true; btnPreview.disabled = true; progress(0); status('Preparing PDF...');
    try{
      const pdfDoc = await PDFDocument.create();
      const title = document.getElementById('pdfTitle').value.trim();
      const author = document.getElementById('pdfAuthor').value.trim();
      const subject = document.getElementById('pdfSubject').value.trim();
      if(title) pdfDoc.setTitle(title); if(author) pdfDoc.setAuthor(author); if(subject) pdfDoc.setSubject(subject);

      const { wPt, hPt } = computePageSizePoints();
      const marginMM = parseFloat(marginsEl.value) || 10;
      const marginPt = mmToPoints(marginMM);

      const fitMode = fitModeEl.value;
      const quality = parseFloat(qualityEl.value);
      const dpi = parseInt(dpiEl.value,10) || 150;
      const embedAsJpg = embedAsJpgEl.checked;
      const watermarkText = watermarkTextEl.value.trim();
      const watermarkOpacity = parseFloat(watermarkOpacityEl.value) || 0.25;
      const watermarkSize = parseFloat(watermarkSizeEl.value) || 24;
      const watermarkPos = watermarkPosEl.value;
      const pagesCount = images.length;

      for(let idx=0; idx<pagesCount; idx++){
        const imgObj = images[idx];
        status(`Processing image ${idx+1} / ${pagesCount}`);
        progress( Math.round((idx/pagesCount) * 100) );

        const processed = await renderImageForPdf(imgObj, { dpi, quality, fitMode, targetPtWidth: wPt - 2*marginPt, targetPtHeight: hPt - 2*marginPt });

        let embeddedImage;
        if(embedAsJpg && processed.mime === 'image/png'){ const jpegBlob = await blobToJpeg(processed.blob, quality); const arrayBuf = await jpegBlob.arrayBuffer(); embeddedImage = await pdfDoc.embedJpg(arrayBuf); }
        else if(processed.mime === 'image/png'){ const arrayBuf = await processed.blob.arrayBuffer(); embeddedImage = await pdfDoc.embedPng(arrayBuf); }
        else if(processed.mime.startsWith('image/jpeg')){ const arrayBuf = await processed.blob.arrayBuffer(); embeddedImage = await pdfDoc.embedJpg(arrayBuf); }
        else { const arrayBuf = await processed.blob.arrayBuffer(); embeddedImage = await pdfDoc.embedPng(arrayBuf); }

        const page = pdfDoc.addPage([wPt, hPt]);
        const targetW = wPt - 2*marginPt;
        const targetH = hPt - 2*marginPt;
        const imgWpt = (processed.width_px / processed.dpi) * 72;
        const imgHpt = (processed.height_px / processed.dpi) * 72;
        let drawW = imgWpt, drawH = imgHpt;

        if(fitMode === 'contain'){ const scale = Math.min(targetW / imgWpt, targetH / imgHpt, 1); drawW = imgWpt * scale; drawH = imgHpt * scale; }
        else if(fitMode === 'cover'){ const scale = Math.max(targetW / imgWpt, targetH / imgHpt); drawW = imgWpt * scale; drawH = imgHpt * scale; }
        else if(fitMode === 'stretch'){ drawW = targetW; drawH = targetH; }
        else if(fitMode === 'center'){ drawW = imgWpt; drawH = imgHpt; }

        let x = marginPt + (targetW - drawW)/2;
        let y = marginPt + (targetH - drawH)/2;

        page.drawImage(embeddedImage, { x, y, width: drawW, height: drawH });

        if(watermarkText){
          const helv = await pdfDoc.embedFont(StandardFonts.Helvetica);
          const wmSize = watermarkSize;
          const textWidth = helv.widthOfTextAtSize(watermarkText, wmSize);
          let tx = 0, ty = 0;
          if(watermarkPos === 'center'){ tx = (wPt - textWidth)/2; ty = (hPt - wmSize)/2; }
          if(watermarkPos === 'top-left'){ tx = marginPt; ty = hPt - marginPt - wmSize; }
          if(watermarkPos === 'top-right'){ tx = wPt - marginPt - textWidth; ty = hPt - marginPt - wmSize; }
          if(watermarkPos === 'bottom-left'){ tx = marginPt; ty = marginPt; }
          if(watermarkPos === 'bottom-right'){ tx = wPt - marginPt - textWidth; ty = marginPt; }
          page.drawText(watermarkText, { x: tx, y: ty, size: wmSize, font: helv, color: rgb(0,0,0), opacity: watermarkOpacity, });
        }

        await sleep(10);
      }

      progress(100);
      status('Finalizing PDF...');
      const pdfBytes = await pdfDoc.save();
      const blob = new Blob([pdfBytes], {type:'application/pdf'});
      if(preview){ const url = URL.createObjectURL(blob); window.open(url, '_blank'); }
      else { saveAs(blob, outNameEl.value || 'document.pdf'); }
      status('Done');
    } catch (err){
      console.error(err);
      alert('Error: ' + (err.message || err));
      status('Error');
    } finally {
      btnGenerate.disabled = false; btnPreview.disabled = false; progress(0);
    }
  }

  async function renderImageForPdf(imgObj, { dpi=150, quality=0.9, fitMode='contain', targetPtWidth, targetPtHeight }){
    const img = await loadImage(imgObj.dataUrl);
    const targetPxW = Math.round(targetPtWidth * dpi / 72);
    const targetPxH = Math.round(targetPtHeight * dpi / 72);

    let srcW = img.naturalWidth, srcH = img.naturalHeight;
    let drawW = srcW, drawH = srcH;
    if(fitMode === 'contain'){ const scale = Math.min(targetPxW / srcW, targetPxH / srcH, 1); drawW = Math.round(srcW * scale); drawH = Math.round(srcH * scale); }
    else if(fitMode === 'cover'){ const scale = Math.max(targetPxW / srcW, targetPxH / srcH); drawW = Math.round(srcW * scale); drawH = Math.round(srcH * scale); }
    else if(fitMode === 'stretch'){ drawW = targetPxW; drawH = targetPxH; }
    else if(fitMode === 'center'){ drawW = srcW; drawH = srcH; }

    const canvas = document.createElement('canvas');
    canvas.width = Math.max(1, drawW); canvas.height = Math.max(1, drawH);
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = '#ffffff'; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.drawImage(img, 0, 0, srcW, srcH, 0,0, canvas.width, canvas.height);

    const preferJpg = embedAsJpgEl.checked;
    let mime = 'image/png'; let blob;
    if(preferJpg){ blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', quality)); mime = 'image/jpeg'; }
    else { blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png')); mime = 'image/png'; }
    return { mime, blob, width_px: canvas.width, height_px: canvas.height, dpi };
  }

  async function blobToJpeg(blob, quality=0.9){
    const url = URL.createObjectURL(blob);
    const img = await loadImage(url);
    const canvas = document.createElement('canvas');
    canvas.width = img.naturalWidth; canvas.height = img.naturalHeight;
    const ctx = canvas.getContext('2d'); ctx.fillStyle = '#ffffff'; ctx.fillRect(0,0,canvas.width, canvas.height); ctx.drawImage(img,0,0);
    return new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg', quality));
  }

  function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }
  function progress(p){ progressBar.style.width = (p) + '%'; progressBar.setAttribute('aria-valuenow', p); }
  function status(s){ statusEl.textContent = s; }

  (function initUI(){ pageSizeEl.addEventListener('change', ()=> { if(pageSizeEl.value === 'Custom') customSizeRow.classList.remove('d-none'); else customSizeRow.classList.add('d-none'); }); renderThumbs(); })();

  function listImages(){ console.table(images.map(i=>({name:i.name, w:i.width, h:i.height, rot:i.rotation}))); }
  window.listImages = listImages;
  status('Idle');
}); // end whenLibsReady
</script>

<!-- Bootstrap JS bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
