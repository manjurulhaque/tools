<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Quotations</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: #f9fafb;
}

nav {
  padding: 14px 18px;
  background: #111827;
  color: #fff;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

#nav-title {
  font-size: 20px;
  font-weight: 700;
}

nav input,
nav select {
  padding: 6px 8px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}

#count {
  margin-left: auto;
  font-size: 14px;
  opacity: .85;
}

#content-header {
  max-width: 900px;
  margin: 0 auto;
  padding: 16px 20px 8px;
}

#subtitle {
  font-size: 18px;
  font-weight: 600;
}

#breadcrumbs {
  margin-top: 8px;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.breadcrumb {
  background: #374151;
  color: #fff;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  display: flex;
  gap: 6px;
}

.breadcrumb button {
  background: none;
  border: none;
  color: #fff;
  cursor: pointer;
}

main {
  max-width: 900px;
  margin: 0 auto;
  padding: 12px 20px 28px;
}

.card {
  position: relative;
  background: #fff;
  border-radius: 16px;
  padding: 20px 22px 18px;
  margin-bottom: 18px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 8px 24px rgba(0,0,0,.04);
}

.card::before {
  content: "“";
  position: absolute;
  top: 10px;
  left: 14px;
  font-size: 48px;
  color: #e5e7eb;
}

.quote {
  font-size: 17px;
  line-height: 1.65;
  padding-left: 18px;
}

.meta {
  margin-top: 16px;
  display: flex;
  gap: 10px;
}

.category-pill,
.author-chip {
  background: none;
  border: none;
  cursor: pointer;
  font-weight: 600;
  font-size: 12px;
}

.category-Wisdom { color:#5b21b6; }
.category-Science { color:#075985; }
.category-Technology { color:#166534; }
.category-Philosophy { color:#9a3412; }

.author-chip {
  margin-left: auto;
  font-size: 13px;
}
</style>
</head>

<body>

<nav>
  <div id="nav-title">Quotations</div>
  <input id="search" placeholder="Search…">
  <select id="category"><option value="">All categories</option></select>
  <select id="author"><option value="">All authors</option></select>
  <select id="sort">
    <option value="text">Sort: Quote (A–Z)</option>
    <option value="author">Sort: Author (A–Z)</option>
    <option value="category">Sort: Category (A–Z)</option>
  </select>
  <span id="count"></span>
</nav>

<section id="content-header">
  <div id="subtitle"></div>
  <div id="breadcrumbs"></div>
</section>

<main id="list"></main>

<script>
const QUOTATIONS = [
  { text:"The happiness of your life depends upon the quality of your thoughts.", author:"Marcus Aurelius", category:"Wisdom" },
  { text:"Life is like riding a bicycle. To keep your balance you must keep moving.", author:"Albert Einstein", category:"Science" },
  { text:"That brain of mine is something more than merely mortal; as time will show.", author:"Ada Lovelace", category:"Technology" },
  { text:"We can only see a short distance ahead, but we can see plenty there that needs to be done.", author:"Alan Turing", category:"Technology" },
  { text:"It does not matter how slowly you go as long as you do not stop.", author:"Confucius", category:"Philosophy" }
];

const items = QUOTATIONS.map(q => ({ ...q }));

const list = document.getElementById("list");
const searchInput = document.getElementById("search");
const categorySelect = document.getElementById("category");
const authorSelect = document.getElementById("author");
const sortSelect = document.getElementById("sort");
const countSpan = document.getElementById("count");
const subtitle = document.getElementById("subtitle");
const breadcrumbs = document.getElementById("breadcrumbs");

[...new Set(items.map(i => i.category))].forEach(c => categorySelect.add(new Option(c,c)));
[...new Set(items.map(i => i.author))].forEach(a => authorSelect.add(new Option(a,a)));

/* ================= URL SYNC ================= */
function readURL() {
  const p = new URLSearchParams(location.search);
  searchInput.value = p.get("search") || "";
  categorySelect.value = p.get("category") || "";
  authorSelect.value = p.get("author") || "";
  sortSelect.value = p.get("sort") || "text";
}

function writeURL() {
  const p = new URLSearchParams();
  if (searchInput.value) p.set("search", searchInput.value);
  if (categorySelect.value) p.set("category", categorySelect.value);
  if (authorSelect.value) p.set("author", authorSelect.value);
  if (sortSelect.value !== "text") p.set("sort", sortSelect.value);
  history.replaceState(null,"","?"+p.toString());
}

/* ================= FILTER + SORT ================= */
function applyFilters() {
  const term = searchInput.value.toLowerCase();
  let filtered = items.filter(i =>
    (!categorySelect.value || i.category === categorySelect.value) &&
    (!authorSelect.value || i.author === authorSelect.value) &&
    (!term || i.text.toLowerCase().includes(term) ||
              i.author.toLowerCase().includes(term) ||
              i.category.toLowerCase().includes(term))
  );

  filtered.sort((a,b) =>
    a[sortSelect.value].localeCompare(b[sortSelect.value])
  );

  writeURL();
  render(filtered);
}

function render(filtered) {
  list.innerHTML = "";
  filtered.forEach(i => {
    list.innerHTML += `
      <div class="card">
        <div class="quote">${i.text}</div>
        <div class="meta">
          <button class="category-pill category-${i.category}">${i.category}</button>
          <button class="author-chip">${i.author}</button>
        </div>
      </div>`;
  });
  subtitle.textContent = filtered.length ? "Filtered quotations" : "No results";
  countSpan.textContent = filtered.length + " results";
}

/* ================= EVENTS ================= */
[searchInput, categorySelect, authorSelect, sortSelect]
  .forEach(el => el.addEventListener("input", applyFilters));

readURL();
applyFilters();
</script>

</body>
</html>
