<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Quotations</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: #f9fafb;
}

/* ================= NAV ================= */
nav {
  padding: 14px 18px;
  background: #111827;
  color: #fff;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

#nav-title {
  font-size: 20px;
  font-weight: 700;
}

nav input,
nav select {
  padding: 6px 8px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}

#count {
  margin-left: auto;
  font-size: 14px;
  opacity: .85;
}

/* ================= CONTENT HEADER ================= */
#content-header {
  max-width: 900px;
  margin: 0 auto;
  padding: 16px 20px 8px;
}

#subtitle {
  font-size: 18px;
  font-weight: 600;
  color: #111827;
}

#breadcrumbs {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* ================= BREADCRUMBS ================= */
.breadcrumb {
  background: #374151;
  color: #fff;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.breadcrumb button {
  background: none;
  border: none;
  color: #fff;
  cursor: pointer;
  font-size: 12px;
  padding: 0;
}

/* ================= CONTENT ================= */
main {
  max-width: 900px;
  margin: 0 auto;
  padding: 12px 20px 28px;
}

/* ================= CARD ================= */
.card {
  position: relative;
  background: #ffffff;
  border-radius: 16px;
  padding: 20px 22px 18px;
  margin-bottom: 18px;
  border: 1px solid #e5e7eb;
  box-shadow:
    0 1px 2px rgba(0,0,0,.04),
    0 8px 24px rgba(0,0,0,.04);
  transition: transform .15s ease, box-shadow .15s ease;
}

.card:hover {
  transform: translateY(-1px);
  box-shadow:
    0 2px 6px rgba(0,0,0,.06),
    0 12px 32px rgba(0,0,0,.08);
}

.card::before {
  content: "“";
  position: absolute;
  top: 10px;
  left: 14px;
  font-size: 48px;
  color: #e5e7eb;
}

.quote {
  font-size: 17px;
  line-height: 1.65;
  color: #111827;
  padding-left: 18px;
}

.meta {
  margin-top: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* CATEGORY PILL */
.category-pill {
  padding: 4px 12px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 12px;
  cursor: pointer;
  background: none;
  border: none;
}

.category-Wisdom { background:#ede9fe; color:#5b21b6; }
.category-Science { background:#e0f2fe; color:#075985; }
.category-Technology { background:#dcfce7; color:#166534; }
.category-Philosophy { background:#fff7ed; color:#9a3412; }

/* AUTHOR */
.author-chip {
  margin-left: auto;
  font-weight: 600;
  color: #374151;
  cursor: pointer;
  background: none;
  border: none;
}

.author-chip:hover,
.category-pill:hover {
  text-decoration: underline;
}
</style>
</head>

<body>

<nav>
  <div id="nav-title">Quotations</div>
  <input id="search" placeholder="Search text, author, category…">
  <select id="category">
    <option value="">All categories</option>
  </select>
  <select id="author">
    <option value="">All authors</option>
  </select>
  <span id="count"></span>
</nav>

<section id="content-header">
  <div id="subtitle"></div>
  <div id="breadcrumbs"></div>
</section>

<main id="list"></main>

<script>
const QUOTATIONS = [
  {
    text: "The happiness of your life depends upon the quality of your thoughts.",
    author: "Marcus Aurelius",
    category: "Wisdom"
  },
  {
    text: "Life is like riding a bicycle. To keep your balance you must keep moving.",
    author: "Albert Einstein",
    category: "Science"
  },
  {
    text: "That brain of mine is something more than merely mortal; as time will show.",
    author: "Ada Lovelace",
    category: "Technology"
  },
  {
    text: "We can only see a short distance ahead, but we can see plenty there that needs to be done.",
    author: "Alan Turing",
    category: "Technology"
  },
  {
    text: "It does not matter how slowly you go as long as you do not stop.",
    author: "Confucius",
    category: "Philosophy"
  }
];

/* build items — FIXED: no extra quotes */
const items = QUOTATIONS.map(q => ({
  text: q.text,
  author: q.author,
  category: q.category
}));

const list = document.getElementById("list");
const searchInput = document.getElementById("search");
const categorySelect = document.getElementById("category");
const authorSelect = document.getElementById("author");
const countSpan = document.getElementById("count");
const subtitle = document.getElementById("subtitle");
const breadcrumbs = document.getElementById("breadcrumbs");

[...new Set(items.map(i => i.category))]
  .forEach(c => categorySelect.add(new Option(c, c)));

[...new Set(items.map(i => i.author))]
  .forEach(a => authorSelect.add(new Option(a, a)));

function updateHeader() {
  const c = categorySelect.value;
  const a = authorSelect.value;

  if (c && a) subtitle.textContent = `${c} Quotations by ${a}`;
  else if (c) subtitle.textContent = `${c} Quotations`;
  else if (a) subtitle.textContent = `Quotations by ${a}`;
  else subtitle.textContent = "All quotations";
}

function updateBreadcrumbs() {
  breadcrumbs.innerHTML = "";

  if (categorySelect.value)
    breadcrumbs.appendChild(makeCrumb(`Category: ${categorySelect.value}`, () => {
      categorySelect.value = "";
      applyFilters();
    }));

  if (authorSelect.value)
    breadcrumbs.appendChild(makeCrumb(`Author: ${authorSelect.value}`, () => {
      authorSelect.value = "";
      applyFilters();
    }));

  if (searchInput.value)
    breadcrumbs.appendChild(makeCrumb(`Search: "${searchInput.value}"`, () => {
      searchInput.value = "";
      applyFilters();
    }));
}

function makeCrumb(label, onRemove) {
  const d = document.createElement("div");
  d.className = "breadcrumb";
  d.innerHTML = `<span>${label}</span><button>✕</button>`;
  d.querySelector("button").onclick = onRemove;
  return d;
}

function render(filtered) {
  list.innerHTML = "";

  filtered.forEach(item => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="quote">${item.text}</div>
      <div class="meta">
        <button class="category-pill category-${item.category}">${item.category}</button>
        <button class="author-chip">${item.author}</button>
      </div>
    `;

    card.querySelector(".category-pill").onclick = () => {
      categorySelect.value =
        categorySelect.value === item.category ? "" : item.category;
      applyFilters();
    };

    card.querySelector(".author-chip").onclick = () => {
      authorSelect.value =
        authorSelect.value === item.author ? "" : item.author;
      applyFilters();
    };

    list.appendChild(card);
  });

  countSpan.textContent = filtered.length + " results";
}

/* ================= FILTER LOGIC — IMPROVED SEARCH ================= */
function applyFilters() {
  const term = searchInput.value.toLowerCase();
  const c = categorySelect.value;
  const a = authorSelect.value;

  const filtered = items.filter(item => {
    if (c && item.category !== c) return false;
    if (a && item.author !== a) return false;
    if (
      term &&
      !(
        item.text.toLowerCase().includes(term) ||
        item.author.toLowerCase().includes(term) ||
        item.category.toLowerCase().includes(term)
      )
    ) return false;
    return true;
  });

  updateHeader();
  updateBreadcrumbs();
  render(filtered);
}

searchInput.addEventListener("input", applyFilters);
categorySelect.addEventListener("change", applyFilters);
authorSelect.addEventListener("change", applyFilters);

applyFilters();
</script>

</body>
</html>
