<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Web Tools — Home</title>
  <meta name="description" content="Directory of web tools — search, filter, favorite and open web utilities." />
  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --text:#0f1724; --muted:#546174; --accent:#2563eb;
      --glass: rgba(255,255,255,0.6);
      --radius:12px; --shadow: 0 6px 20px rgba(18,28,56,0.08);
      --success: #16a34a;
    }
    [data-theme="dark"]{
      --bg:#0b1220; --card:#071021; --text:#e6eef8; --muted:#9fb0d0; --accent:#3b82f6;
      --glass: rgba(255,255,255,0.03);
      --shadow: 0 6px 20px rgba(2,6,23,0.7);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1000px 600px at -10% -10%, rgba(37,99,235,0.06), transparent),
                  radial-gradient(800px 400px at 110% 110%, rgba(99,102,241,0.04), transparent),
                  var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      padding:32px;
    }

    header{
      display:flex; gap:20px; align-items:center; margin-bottom:20px;
      justify-content:space-between;
    }
    .brand{
      display:flex; gap:16px; align-items:center;
    }
    .logo{
      width:56px; height:56px; border-radius:12px; background:linear-gradient(135deg,var(--accent), #7c3aed);
      display:flex; align-items:center; justify-content:center; color:white; font-weight:700; font-size:20px;
      box-shadow:var(--shadow);
    }
    h1{font-size:18px; margin:0}
    p.lead{margin:0; color:var(--muted); font-size:13px}

    .controls{
      display:flex; gap:12px; align-items:center; flex-wrap:wrap;
    }
    .search {
      display:flex; align-items:center; gap:8px;
      background:var(--card); border-radius:10px; padding:8px 12px; box-shadow:var(--shadow);
      min-width:260px;
    }
    .search input{
      border:0; outline:0; background:transparent; color:var(--text); font-size:14px; width:220px;
    }
    .select, .btn {
      background:var(--card); border-radius:10px; padding:8px 12px; box-shadow:var(--shadow); border:0; cursor:pointer;
      color:var(--text); font-size:14px;
    }
    .btn.secondary{background:transparent; border:1px solid rgba(0,0,0,0.06)}
    .icon{width:18px;height:18px;display:inline-block;vertical-align:middle}

    main{margin-top:18px}
    .grid{
      display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:16px;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent), var(--card);
      border-radius:var(--radius); padding:16px; box-shadow:var(--shadow); position:relative; overflow:hidden;
      display:flex; flex-direction:column; gap:12px; min-height:140px;
    }
    .card .meta{display:flex; align-items:center; gap:12px;}
    .tool-icon{
      width:56px;height:56px;border-radius:10px; flex-shrink:0; display:flex; align-items:center; justify-content:center;
      font-weight:700; color:white;
      background:linear-gradient(135deg,var(--accent), #7c3aed);
    }
    .tool-title{font-weight:600; font-size:15px; margin:0}
    .tool-desc{margin:0; color:var(--muted); font-size:13px}
    .tags{display:flex; gap:8px; flex-wrap:wrap}
    .tag{background:var(--glass); padding:6px 8px; border-radius:999px; font-size:12px; color:var(--muted)}
    .card-actions{margin-top:auto; display:flex; gap:8px; align-items:center}
    .action{background:transparent; border:1px solid rgba(0,0,0,0.06); padding:8px 10px; border-radius:8px; cursor:pointer; font-size:13px; color:var(--text)}
    .favorite.active{color:var(--success); border-color:rgba(22,163,74,0.12); box-shadow:0 4px 10px rgba(22,163,74,0.06)}

    .empty{padding:48px; text-align:center; color:var(--muted); border-radius:12px; background:var(--card); box-shadow:var(--shadow)}

    .modal-backdrop{position:fixed; inset:0; background:rgba(2,6,23,0.45); display:none; align-items:center; justify-content:center; z-index:60}
    .modal{background:var(--card); border-radius:12px; padding:20px; width:min(720px,92%); box-shadow:var(--shadow)}
    .modal h2{margin:0 0 8px 0}
    .modal .modal-body{display:flex; gap:18px; align-items:flex-start}
    .modal .modal-body img{width:92px;height:92px;border-radius:12px; object-fit:cover}
    .modal .meta-list{display:flex; flex-direction:column; gap:6px}
    .modal .meta-list a{color:var(--accent)}

    footer{margin-top:20px;color:var(--muted); font-size:13px; text-align:center}

    @media (max-width:640px){
      header{flex-direction:column; align-items:stretch; gap:12px}
      .search input{width:130px}
      .controls{justify-content:space-between}
    }

    [tabindex="0"]:focus, button:focus, input:focus{
      outline:3px solid rgba(59,130,246,0.12);
      outline-offset:2px;
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true">WT</div>
      <div>
        <h1>Web Tools Directory</h1>
        <p class="lead">Find, filter and open the web tools you need.</p>
      </div>
    </div>

    <div class="controls" role="region" aria-label="controls">
      <div class="search" title="Search tools">
        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input id="search" type="search" placeholder="Search tools (press /)" aria-label="Search tools" />
      </div>

      <select id="category" class="select" aria-label="Filter by category">
        <option value="all">All categories</option>
      </select>

      <select id="sort" class="select" aria-label="Sort tools">
        <option value="relevance">Sort: Relevance</option>
        <option value="alpha">Sort: A → Z</option>
        <option value="new">Sort: Newest</option>
      </select>

      <button id="themeToggle" class="btn" aria-pressed="false" title="Toggle theme">Toggle theme</button>
      <button id="favoritesFilter" class="btn secondary" aria-pressed="false" title="Toggle favorites (f)">Favorites</button>
    </div>
  </header>

  <main>
    <section id="toolsGrid" class="grid" aria-live="polite" aria-label="Available web tools">
      <!-- Cards injected by JS -->
    </section>

    <div id="empty" class="empty" style="display:none;">
      No tools match your filters. Try clearing search or modify filters.
    </div>
  </main>

  <footer>
    <small>Built for demonstration. Data stored locally in your browser.</small>
  </footer>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h2 id="modalTitle">Tool</h2>
        <button id="modalClose" class="btn" aria-label="Close">Close</button>
      </header>
      <div class="modal-body">
        <div style="flex:0 0 96px; display:flex;align-items:center;justify-content:center">
          <div id="modalIcon" style="width:92px;height:92px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;background:linear-gradient(135deg,var(--accent), #7c3aed)"></div>
        </div>
        <div style="flex:1">
          <p id="modalDesc" style="margin-top:0;color:var(--muted)"></p>
          <div class="meta-list" style="margin-top:12px">
            <div><strong>Category:</strong> <span id="modalCategory"></span></div>
            <div><strong>URL:</strong> <a id="modalUrl" href="#" target="_blank" rel="noopener">Open tool</a></div>
            <div><strong>Last updated:</strong> <span id="modalUpdated"></span></div>
          </div>

          <div style="margin-top:12px; display:flex; gap:8px">
            <button id="openTool" class="action">Open</button>
            <button id="copyLink" class="action">Copy Link</button>
            <button id="modalFav" class="action">Add favorite</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // -------- Sample data --------
    const TOOLS = [
      { id: 'url-shortener', name: 'URL Shortener', description: 'Create short links with analytics.', category: 'Utilities', url: 'https://example.com/url-shortener', updated: '2025-08-20' },
      { id: 'color-picker', name: 'Color Picker', description: 'Pick colors, convert formats (HEX, RGB, HSL).', category: 'Design', url: 'https://example.com/color-picker', updated: '2025-01-17' },
      { id: 'json-beautify', name: 'JSON Beautify', description: 'Format and validate JSON quickly.', category: 'Developer', url: 'https://example.com/json-beautify', updated: '2024-11-02' },
      { id: 'image-compressor', name: 'Image Compressor', description: 'Lossless & lossy image compression for web.', category: 'Media', url: 'https://example.com/image-compressor', updated: '2025-06-01' },
      { id: 'grep-online', name: 'Regex Tester', description: 'Build, test and explain regular expressions.', category: 'Developer', url: 'https://example.com/regex-tester', updated: '2025-03-28' },
      { id: 'json-to-csv', name: 'JSON → CSV', description: 'Convert JSON datasets to CSV quickly.', category: 'Developer', url: 'https://example.com/json-to-csv', updated: '2025-02-09' },
      { id: 'markdown-preview', name: 'Markdown Preview', description: 'Live markdown editor with export.', category: 'Writing', url: 'https://example.com/markdown-preview', updated: '2024-10-21' },
      { id: 'seo-checker', name: 'SEO Checker', description: 'Quick SEO audit for pages and metadata.', category: 'Marketing', url: 'https://example.com/seo-checker', updated: '2025-09-12' }
    ];

    // -------- State --------
    const state = {
      query: '',
      category: 'all',
      sort: 'relevance',
      favoritesOnly: false,
      favorites: new Set(JSON.parse(localStorage.getItem('wt:favorites') || '[]')),
      theme: localStorage.getItem('wt:theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light')
    };

    // -------- DOM refs --------
    const grid = document.getElementById('toolsGrid');
    const searchInput = document.getElementById('search');
    const categorySelect = document.getElementById('category');
    const sortSelect = document.getElementById('sort');
    const favFilterBtn = document.getElementById('favoritesFilter');
    const themeToggle = document.getElementById('themeToggle');
    const emptyEl = document.getElementById('empty');

    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalTitle = document.getElementById('modalTitle');
    const modalIcon = document.getElementById('modalIcon');
    const modalDesc = document.getElementById('modalDesc');
    const modalCategory = document.getElementById('modalCategory');
    const modalUrl = document.getElementById('modalUrl');
    const modalUpdated = document.getElementById('modalUpdated');
    const modalClose = document.getElementById('modalClose');
    const openToolBtn = document.getElementById('openTool');
    const copyLinkBtn = document.getElementById('copyLink');
    const modalFavBtn = document.getElementById('modalFav');

    function init() {
      document.documentElement.setAttribute('data-theme', state.theme === 'dark' ? 'dark' : 'light');
      themeToggle.setAttribute('aria-pressed', state.theme === 'dark' ? 'true' : 'false');

      const cats = Array.from(new Set(TOOLS.map(t => t.category))).sort();
      for (const c of cats) {
        const opt = document.createElement('option');
        opt.value = c;
        opt.textContent = c;
        categorySelect.appendChild(opt);
      }

      searchInput.addEventListener('input', e => { state.query = e.target.value.trim().toLowerCase(); render(); });
      categorySelect.addEventListener('change', e => { state.category = e.target.value; render(); });
      sortSelect.addEventListener('change', e => { state.sort = e.target.value; render(); });
      favFilterBtn.addEventListener('click', toggleFavoritesFilter);
      themeToggle.addEventListener('click', toggleTheme);

      window.addEventListener('keydown', (e) => {
        if (e.key === '/') { e.preventDefault(); searchInput.focus(); }
        if (e.key === 'f' && document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA') { e.preventDefault(); toggleFavoritesFilter(); }
        if (e.key === 'Escape') closeModal();
      });

      modalClose.addEventListener('click', closeModal);
      modalBackdrop.addEventListener('click', (e) => { if (e.target === modalBackdrop) closeModal(); });

      openToolBtn.addEventListener('click', () => {
        if (modalBackdrop.dataset.toolUrl) window.open(modalBackdrop.dataset.toolUrl, '_blank', 'noopener');
      });
      copyLinkBtn.addEventListener('click', copyModalLink);
      modalFavBtn.addEventListener('click', toggleModalFavorite);

      render();
    }

    function render() {
      let results = TOOLS.filter(t => {
        if (state.category !== 'all' && t.category !== state.category) return false;
        if (state.favoritesOnly && !state.favorites.has(t.id)) return false;
        if (!state.query) return true;
        const q = state.query;
        return (t.name + ' ' + t.description + ' ' + t.category).toLowerCase().includes(q);
      });

      if (state.sort === 'alpha') {
        results.sort((a,b) => a.name.localeCompare(b.name));
      } else if (state.sort === 'new') {
        results.sort((a,b) => new Date(b.updated) - new Date(a.updated));
      } else {
        results.sort((a,b) => {
          const aq = (a.name + ' ' + a.description).toLowerCase().indexOf(state.query);
          const bq = (b.name + ' ' + b.description).toLowerCase().indexOf(state.query);
          if (aq !== bq) return (aq === -1) ? 1 : (bq === -1 ? -1 : aq - bq);
          return new Date(b.updated) - new Date(a.updated);
        });
      }

      grid.innerHTML = '';
      if (results.length === 0) {
        emptyEl.style.display = 'block';
      } else {
        emptyEl.style.display = 'none';
      }

      for (const t of results) {
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('tabindex', '0');
        card.setAttribute('role', 'article');
        card.innerHTML = `
          <div class="meta">
            <div class="tool-icon" aria-hidden="true">${initials(t.name)}</div>
            <div style="flex:1">
              <h3 class="tool-title">${escapeHtml(t.name)}</h3>
              <p class="tool-desc">${escapeHtml(t.description)}</p>
            </div>
          </div>
          <div class="tags">
            <div class="tag">${escapeHtml(t.category)}</div>
          </div>
          <div class="card-actions">
            <button class="action open" data-id="${t.id}" aria-label="Open ${escapeHtml(t.name)}">Open</button>
            <button class="action details" data-id="${t.id}" aria-label="Details for ${escapeHtml(t.name)}">Details</button>
            <button class="action favorite ${state.favorites.has(t.id) ? 'active' : ''}" data-id="${t.id}" aria-pressed="${state.favorites.has(t.id) ? 'true' : 'false'}" title="Toggle favorite">★</button>
          </div>
        `;

        const openBtn = card.querySelector('.open');
        openBtn.addEventListener('click', () => window.open(t.url, '_blank', 'noopener'));

        const detailsBtn = card.querySelector('.details');
        detailsBtn.addEventListener('click', () => openModal(t));

        const favBtn = card.querySelector('.favorite');
        favBtn.addEventListener('click', () => toggleFavorite(t.id, favBtn));

        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') openModal(t);
        });

        grid.appendChild(card);
      }
    }

    function initials(name) {
      const parts = name.split(/\s+/).filter(Boolean);
      return (parts.length === 1 ? parts[0].slice(0,2) : (parts[0][0] + parts[1][0])).toUpperCase();
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
    }

    function toggleFavorite(id, btnElement=null) {
      if (state.favorites.has(id)) state.favorites.delete(id);
      else state.favorites.add(id);
      persistFavorites();
      if (btnElement) {
        btnElement.classList.toggle('active');
        btnElement.setAttribute('aria-pressed', state.favorites.has(id) ? 'true' : 'false');
      }
      render();
    }

    function persistFavorites() {
      localStorage.setItem('wt:favorites', JSON.stringify(Array.from(state.favorites)));
    }

    function toggleFavoritesFilter() {
      state.favoritesOnly = !state.favoritesOnly;
      favFilterBtn.setAttribute('aria-pressed', state.favoritesOnly ? 'true' : 'false');
      favFilterBtn.classList.toggle('pressed', state.favoritesOnly);
      render();
    }

    function toggleTheme() {
      state.theme = state.theme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', state.theme === 'dark' ? 'dark' : 'light');
      localStorage.setItem('wt:theme', state.theme);
      themeToggle.setAttribute('aria-pressed', state.theme === 'dark' ? 'true' : 'false');
    }

    function openModal(tool) {
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden', 'false');
      modalBackdrop.dataset.toolUrl = tool.url;
      modalTitle.textContent = tool.name;
      modalIcon.textContent = initials(tool.name);
      modalDesc.textContent = tool.description;
      modalCategory.textContent = tool.category;
      modalUrl.href = tool.url;
      modalUrl.textContent = tool.url;
      modalUpdated.textContent = tool.updated;
      modalFavBtn.textContent = state.favorites.has(tool.id) ? 'Remove favorite' : 'Add favorite';
      modalFavBtn.dataset.id = tool.id;
      modalClose.focus();
    }

    function closeModal() {
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
      modalBackdrop.dataset.toolUrl = '';
    }

    function copyModalLink() {
      const url = modalBackdrop.dataset.toolUrl;
      if (!url) return;
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(url).then(() => {
          copyLinkBtn.textContent = 'Copied!';
          setTimeout(() => copyLinkBtn.textContent = 'Copy Link', 1500);
        }).catch(() => {
          prompt('Copy this link:', url);
        });
      } else {
        prompt('Copy this link:', url);
      }
    }

    function toggleModalFavorite() {
      const id = modalFavBtn.dataset.id;
      if (!id) return;
      toggleFavorite(id);
      modalFavBtn.textContent = state.favorites.has(id) ? 'Remove favorite' : 'Add favorite';
    }

    init();

    window.__WT = { state, TOOLS, render, openModal };
  </script>
</body>
</html>
